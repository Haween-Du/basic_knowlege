<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // [1, [2, [3, [4]]]].fn(2) = [1, 2, 3, [4]]
      let arr = [1, [2, [2, [4]]]];
      function getLevel(arr) {
        let arrLevel = 1;
        const dfs = (arr) => {
          for (let i = 0; i < arr.length; i++) {
            if (Array.isArray(arr[i])) {
              arrLevel++;
              dfs(arr[i]);
            }
          }
        };
        dfs(arr);
        return arrLevel;
      }
      function fn(arr, resLevel) {
        let arrLevel = getLevel(arr);
        let result = [];
        const dfs = (arrParam) => {
          for (let i = 0; i < arrParam.length; i++) {
            if (Array.isArray(arrParam[i])) {
              if (arrLevel === resLevel) {
                result.push(arrParam[i]);
                return;
              }
              arrLevel--;
              dfs(arrParam[i]);
            } else {
              result.push(arrParam[i]);
            }
          }
        };
        dfs(arr);
        return result;
      }
      console.log(fn(arr, 2), "result");
    </script>
  </body>
</html>
