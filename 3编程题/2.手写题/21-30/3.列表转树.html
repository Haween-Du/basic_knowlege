<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const list = [
        {
          id: 1,
          text: "节点1",
          parentId: 0, //这里用0表示为顶级节点
        },
        {
          id: 2,
          text: "节点1_1",
          parentId: 1, //通过这个字段来确定子父级
        },
      ];
      const arr = [
        {
          id: 2,
          name: "部门B",
          parentId: 0,
        },
        {
          id: 3,
          name: "部门C",
          parentId: 1,
        },
        {
          id: 1,
          name: "部门A",
          parentId: 2,
        },
        {
          id: 4,
          name: "部门D",
          parentId: 1,
        },
        {
          id: 5,
          name: "部门E",
          parentId: 2,
        },
        {
          id: 6,
          name: "部门F",
          parentId: 3,
        },
        {
          id: 7,
          name: "部门G",
          parentId: 2,
        },
        {
          id: 8,
          name: "部门H",
          parentId: 4,
        },
      ];

      // [
      //     {
      //         id: 1,
      //         text: '节点1',
      //         parentId: 0,
      //         children: [
      //             {
      //                 id:2,
      //                 text: '节点1_1',
      //                 parentId:1
      //             }
      //         ]
      //     }
      // ]

      function listToTreeSimple(data) {
        const res = [];
        data.forEach((item) => {
          const parent = data.find((node) => node.id === item.parentId);
          if (parent) {
            parent.children = parent.children || [];
            parent.children.push(item);
          } else {
            res.push(item);
          }
        });
        return res;
      }
      console.log(listToTreeSimple(list), "1");

      // function listToTree(data) {
      //   let temp = {};
      //   let treeData = [];
      //   for (let i = 0; i < data.length; i++) {
      //     temp[data[i].id] = data[i];
      //   }
      //   for (let k in temp) {
      //     if (+temp[k].parentId != 0) {
      //       if (!temp[temp[k].parentId].children) {
      //         temp[temp[k].parentId].children = [];
      //       }
      //       temp[temp[k].parentId].children.push(temp[k]);
      //     } else {
      //       treeData.push(temp[k]);
      //     }
      //   }
      //   return treeData;
      // }
    </script>
  </body>
</html>
